<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Mark an API as unstable."><title>unstable in instability - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-6b053e98.ttf.woff2,FiraSans-Italic-81dc35de.woff2,FiraSans-Regular-0fe48ade.woff2,FiraSans-MediumItalic-ccf7e434.woff2,FiraSans-Medium-e1aa3f0a.woff2,SourceCodePro-Regular-8badfe75.ttf.woff2,SourceCodePro-Semibold-aa29a496.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../static.files/normalize-9960930a.css"><link rel="stylesheet" href="../static.files/rustdoc-84e720fa.css"><meta name="rustdoc-vars" data-root-path="../" data-static-root-path="../static.files/" data-current-crate="instability" data-themes="" data-resource-suffix="" data-rustdoc-version="1.89.0-nightly (e703dff8f 2025-06-11)" data-channel="nightly" data-search-js="search-f7877310.js" data-settings-js="settings-5514c975.js" ><script src="../static.files/storage-4e99c027.js"></script><script defer src="sidebar-items.js"></script><script defer src="../static.files/main-fd3af306.js"></script><noscript><link rel="stylesheet" href="../static.files/noscript-32bb7600.css"></noscript><link rel="alternate icon" type="image/png" href="../static.files/favicon-32x32-6580c154.png"><link rel="icon" type="image/svg+xml" href="../static.files/favicon-044be391.svg"></head><body class="rustdoc attr"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button></nav><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../instability/index.html">instability</a><span class="version">0.3.2</span></h2></div><div class="sidebar-elems"><section id="rustdoc-toc"><h2 class="location"><a href="#">unstable</a></h2><h3><a href="#">Sections</a></h3><ul class="block top-toc"><li><a href="#arguments" title="Arguments">Arguments</a></li><li><a href="#examples" title="Examples">Examples</a></li></ul></section><div id="rustdoc-modnav"><h2 class="in-crate"><a href="index.html">In crate instability</a></h2></div></div></nav><div class="sidebar-resizer" title="Drag to resize sidebar"></div><main><div class="width-limiter"><rustdoc-search></rustdoc-search><section id="main-content" class="content"><div class="main-heading"><div class="rustdoc-breadcrumbs"><a href="index.html">instability</a></div><h1>Attribute Macro <span class="attr">unstable</span><button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><rustdoc-toolbar></rustdoc-toolbar><span class="sub-heading"><a class="src" href="../src/instability/lib.rs.html#105-122">Source</a> </span></div><pre class="rust item-decl"><code>#[unstable]</code></pre><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Mark an API as unstable.</p>
<p>You can apply this attribute to an item in your public API that you would like to expose to
users, but are not yet ready for general use. This is useful when you want to let users try out
some new functionality for an API you haven’t finished testing or designing, or for whatever
reason do not want to commit any stability guarantees for.</p>
<p>This attribute does the following things to annotated items:</p>
<ul>
<li>Changes the visibility of the item from <code>pub</code> to <code>pub(crate)</code> unless a certain crate feature
is enabled. This ensures that internal code within the crate can always use the item, but
downstream consumers cannot access it unless they opt-in to the unstable API.</li>
<li>Changes the Visibility of certain child items of the annotated item (such as struct fields) to
match the item’s visibility. Children that are not public will not be affected.</li>
<li>Appends an “Availability” section to the item’s documentation that notes that the item is
unstable and indicates the name of the crate feature to enable it.</li>
</ul>
<p>Child items of annotated modules are unchanged, as it might be desirable to be able to re-export
them even if the module visibility is restricted. You should apply the attribute to each item
within the module with the same feature name if you want to restrict the module’s contents
itself and not just the module namespace.</p>
<p>Note that unlike the <a href="https://rustc-dev-guide.rust-lang.org/stability.html"><code>unstable</code></a> attribute used in the standard library, this attribute does
not apply itself recursively to child items.</p>
<p>Applying this attribute to non-<code>pub</code> items is pointless and does nothing.</p>
<h2 id="arguments"><a class="doc-anchor" href="#arguments">§</a>Arguments</h2>
<p>The <code>unstable</code> attribute supports optional arguments that can be passed to control its behavior.</p>
<ul>
<li><code>feature</code>: the name of the unstable feature that should control this item’s availability. This
will have the string <code>unstable-</code> prepended to it. If not specified, the item will instead be
guarded by a catch-all <code>unstable</code> feature.</li>
<li><code>issue</code>: a link or reference to a tracking issue for the unstable feature. This will be
included in the item’s documentation.</li>
</ul>
<h2 id="examples"><a class="doc-anchor" href="#examples">§</a>Examples</h2>
<p>We can apply the attribute to a public function like so:</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="doccomment">/// This function does something really risky!
///
/// Don't use it yet!
</span><span class="attr">#[instability::unstable(feature = <span class="string">"risky-function"</span>)]
</span><span class="kw">pub fn </span>risky_function() {
    <span class="macro">unimplemented!</span>()
}</code></pre></div>
<p>This will essentially be expanded to the following:</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="doccomment">/// This function does something really risky!
///
/// Don't use it yet!
///
/// # Availability
///
/// **This API is marked as unstable** and is only available when the `unstable-risky-function`
/// crate feature is enabled. This comes with no stability guarantees, and could be changed or
/// removed at any time.
</span><span class="attr">#[cfg(feature = <span class="string">"unstable-risky-function"</span>)]
</span><span class="kw">pub fn </span>risky_function() {
    <span class="macro">unimplemented!</span>()
}

<span class="doccomment">/// This function does something really risky!
///
/// Don't use it yet!
</span><span class="attr">#[cfg(not(feature = <span class="string">"unstable-risky-function"</span>))]
</span><span class="kw">pub</span>(<span class="kw">crate</span>) <span class="kw">fn </span>risky_function() {
    <span class="macro">unimplemented!</span>()
}</code></pre></div>
</div></details></section></div></main></body></html>